local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

-- Create GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "HoverGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Button
local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 120, 0, 35)
button.Position = UDim2.new(0, 20, 0, 20)
button.Text = "Void Teleport"
button.TextScaled = true
button.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.Parent = screenGui

-- Variables
local originalCFrame = nil
local platform = nil
local hovering = false
local loopConnection = nil
local targetY = -2000

-- Set void height to NaN
Workspace.FallenPartsDestroyHeight = 0/0

-- Helper: disable collisions for parts below NaN (all except platform)
local function disableVoidCollisions()
    for _, part in ipairs(Workspace:GetDescendants()) do
        if part:IsA("BasePart") then
            if platform and part ~= platform then
                part.CanCollide = false
            end
        end
    end
end

button.MouseButton1Click:Connect(function()
    local char = player.Character or player.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")

    if not hovering then
        -- Start hover
        originalCFrame = hrp.CFrame

        -- Create platform at -2000
        platform = Instance.new("Part")
        platform.Size = Vector3.new(100, 1, 100)
        platform.Anchored = true
        platform.CanCollide = true
        platform.Position = Vector3.new(hrp.Position.X, targetY - 0.5, hrp.Position.Z)
        platform.Color = Color3.fromRGB(60, 60, 60)
        platform.Material = Enum.Material.Neon
        platform.Transparency = 0.3
        platform.Name = "VoidPlatform"
        platform.Parent = Workspace

        disableVoidCollisions()

        -- Start loop teleport
        loopConnection = RunService.Heartbeat:Connect(function()
            if hrp and platform then
                hrp.CFrame = CFrame.new(platform.Position.X, targetY, platform.Position.Z)
            end
        end)

        hovering = true
        button.Text = "Return"
    else
        -- Stop loop teleport and return
        if loopConnection then
            loopConnection:Disconnect()
            loopConnection = nil
        end

        if platform then
            platform.CanCollide = false
        end

        -- Tween back to original position
        local returnTween = TweenService:Create(hrp, TweenInfo.new(2, Enum.EasingStyle.Quad), {CFrame = originalCFrame})
        returnTween:Play()

        returnTween.Completed:Connect(function()
            if platform then
                platform:Destroy()
                platform = nil
            end
        end)

        hovering = false
        button.Text = "Void Teleport"
    end
end)
